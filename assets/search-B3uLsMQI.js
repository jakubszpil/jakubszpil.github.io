import{d as l}from"./compress-4c0pvVl7.js";import{G as o,H as f}from"./chunk-OIYGIGL5-Rdhby1S0.js";const h=s=>{try{return new URL(s),!0}catch{return!1}},c="query",i=new Map;function m(s,e){if(e&&i.has(e))return i.get(e);const t=a=>e?JSON.stringify(a).toLowerCase().includes(e.toLowerCase()):!1,r=Object.fromEntries(Object.entries(s).map(([a,n])=>[a,n.filter(t)]));return e&&i.set(e,r),r}function d(s){return Object.values(s).reduce((e,{length:t})=>e+t,0)}function w(s){const e=new URL(s),t=e.searchParams.get(c);if(t){if(t==="")throw e.searchParams.delete(c),o(e.toString());const r=t.trim().split(" ").filter(Boolean).join(" ");if(t!==r)throw r?e.searchParams.set(c,r):e.searchParams.delete(c),o(e.toString())}if(t&&h(t)){const r=new URL(s),a=new URL(t);if(r.origin===a.origin)throw o(f(a))}return t}async function g({request:s,serverLoader:e}){const t=await e(),r=l(t),a=w(s.url),n=m(r,a),u=d(n);return{results:n,initialResults:r,query:a,count:u}}g.hydrate=!0;export{g as c,c as q};
