import{w as u,S as d}from"./seo-DXInsMO8.js";import{n as e,y as l,z as h,x as m,a as p,A as f}from"./chunk-K6AXKMTT-CzbRfI_4.js";import{A as x}from"./articles-pDEdQqDx.js";import{C as y}from"./courses-WZuXP5qd.js";import{c as j,B as w}from"./button-BchY-9V6.js";import{I as g}from"./IconSearch-BhJXjCfY.js";import"./date-BfXueLdd.js";const c=({className:a,type:s,ref:r,...t})=>e.jsx("input",{type:s,className:j("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...t});c.displayName="Input";const k=a=>{try{return new URL(a),!0}catch{return!1}},i="query";function b(a,s){const r=t=>s?JSON.stringify(t).toLowerCase().includes(s.toLowerCase()):!1;return Object.fromEntries(Object.entries(a).map(([t,n])=>[t,n.filter(r)]))}function z(a){return Object.values(a).reduce((s,{length:r})=>s+r,0)}function S(a){const s=new URL(a),r=s.searchParams.get(i);if(r){if(r==="")throw s.searchParams.delete(i),l(s.toString());const t=r.trim().split(" ").filter(Boolean).join(" ");if(r!==t)throw t?s.searchParams.set(i,t):s.searchParams.delete(i),l(s.toString())}if(r&&k(r)){const t=new URL(a),n=new URL(r);if(t.origin===n.origin)throw l(h(n).replace("#/",""))}return r}async function N({request:a,serverLoader:s}){const r=await s(),t=S(a.url),n=b(r,t),o=z(n);return{...n,resultsCount:o,query:t}}N.hydrate=!0;const O=u(function(){const{query:s,articles:r,courses:t,resultsCount:n}=m(),o=p.useCallback(()=>s?n===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",s]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",n,")"]}),r.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",r.length,")"]}),e.jsx(x,{className:"px-0 !grid-cols-1",articles:r})]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",t.length,")"]}),e.jsx(y,{className:"px-0 !grid-cols-1",courses:t})]})]}):null,[r,t,s,n]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(d,{title:s?`(${n}) Rezultaty wyszukiwania dla ${s}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(f,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(c,{type:"text",name:i,placeholder:"Treść zapytania",defaultValue:s??"",required:!0},s),e.jsxs(w,{type:"submit",children:[e.jsx(g,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:o()})]})});export{N as clientLoader,O as default};
