import{j as e,f as l,h as d,e as h,c as m,r as f,F as p}from"./index-LWwriksT.js";import{a as y,B as w}from"./button-D9dl626a.js";import{S as x}from"./seo-D-8npUKe.js";import{f as j}from"./fetch-DtqEbRnp.js";import{A as g}from"./articles-CZDG1aU2.js";import{C as k}from"./courses-CnthOveH.js";import{I as b}from"./IconSearch-D7BqeRZW.js";import"./link-with-prefetch-DTmKAnoK.js";import"./date-BfXueLdd.js";const u=({className:t,type:s,ref:r,...a})=>e.jsx("input",{type:s,className:y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a});u.displayName="Input";const z=t=>{try{return new URL(t),!0}catch{return!1}},o="query";async function S(t,s){const r=await j("/content/search.json",{cache:"force-cache",signal:t.signal}),a=i=>s?JSON.stringify(i).toLowerCase().includes(s.toLowerCase()):!1,n=await r.json();return Object.fromEntries(Object.entries(n).map(([i,c])=>[i,c.filter(a)]))}async function N(t){return Object.values(t).reduce((s,{length:r})=>s+r,0)}async function R(t){const s=new URL(t.url),r=s.searchParams.get(o);if(r){if(r==="")throw s.searchParams.delete(o),l(s.toString());const a=r.trim().split(" ").filter(Boolean).join(" ");if(r!==a)throw a?s.searchParams.set(o,a):s.searchParams.delete(o),l(s.toString())}if(r&&z(r)){const a=new URL(t.url),n=new URL(r);if(a.origin===n.origin)throw l(d(n).replace("#/",""))}return r}async function B({request:t}){const s=await R(t),r=await S(t,s),a=await N(r);return{...r,query:s,resultsCount:a}}function E(){const{query:t,articles:s,courses:r,resultsCount:a}=h(),{pathname:n}=m(),i=f.useCallback(()=>{if(!t)return null;if(a===0)return e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",t]});const c={pathname:n,label:"Powrót do wyników wyszukiwania"};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",a,")"]}),s.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",s.length,")"]}),e.jsx(g,{className:"px-0 !grid-cols-1",articles:s,locationState:c,prefix:"/blog"})]}),r.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",r.length,")"]}),e.jsx(k,{className:"px-0 !grid-cols-1",courses:r,locationState:c,prefix:"/learning"})]})]})},[s,r,t,a]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(x,{title:t?`(${a}) Rezultaty wyszukiwania dla ${t}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(p,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(u,{type:"text",name:o,placeholder:"Treść zapytania",defaultValue:t??"",required:!0},t),e.jsxs(w,{type:"submit",children:[e.jsx(b,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:i()})]})}export{E as default,B as loader};
