import{j as e}from"../vendor/react-_MumHkPe.js";import{F as m,r as d}from"../vendor/routing-D2GSCRDZ.js";import{f as j,d as p,I as x,B as f,h as w}from"../shared-DHsYrvh7.js";import{A as y,c as g}from"../modules/articles-DvzLSNss.js";import{g as k}from"../modules/projects-YZlvtjPO.js";import{a as z,d as N}from"../modules/courses-zCe0ZF0u.js";import{I as b}from"../vendor/libs-FFnJ3hmN.js";import"../index-DBoQRZZR.js";import"../core-C-mmBnMl.js";const q=r=>{try{return new URL(r),!0}catch{return!1}},F=w(async({request:r})=>{const t=new URL(r.url),s=t.searchParams.get("q");if(s){if(s==="")throw t.searchParams.delete("q"),d(t.toString());const a=s.trim().split(" ").filter(Boolean).join(" ");if(s!==a)throw a?t.searchParams.set("q",a):t.searchParams.delete("q"),d(t.toString())}if(!s)return{query:s,articles:[],courses:[],projects:[]};if(q(s)){const a=new URL(r.url),i=new URL(s);if(a.origin===i.origin){const o=i.hash.replace("#","");throw d(o)}}const n=a=>{if(!s)return!1;const i=JSON.stringify(a),o=s.toLowerCase();return i.toLowerCase().includes(o)},c=(await g()).filter(n),h=(await N()).filter(n),l=(await k()).filter(n);return{query:s,articles:c,courses:h,projects:l}});function W(){const{query:r,articles:t,projects:s,courses:n}=j(),c=t.length+s.length+n.length,h=(l,a,i,o,u)=>l?a===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",l]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",a,")"]}),i.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",i.length,")"]}),e.jsx(y,{className:"px-0 !grid-cols-1",articles:i})]}),o.length>0&&e.jsx("section",{children:e.jsxs("h3",{children:["Projekty (",o.length,")"]})}),u.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",u.length,")"]}),e.jsx(z,{className:"px-0 !grid-cols-1",courses:u})]})]}):null;return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(p,{title:`Szukaj${r?`: ${r}`:""}`}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Wyszukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(m,{method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(x,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),e.jsxs(f,{type:"submit",children:[e.jsx(b,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:h(r,c,t,s,n)})]})}export{W as default,F as loader};
