import{r as m,j as e}from"../vendor/react-D9JSudW7.js";import{F as j,r as c}from"../vendor/routing-CbyhGgGM.js";import{f as p,b as x,I as w,B as y,h as f}from"../shared-DpmUizji.js";import{A as g,c as k}from"../modules/articles-DA9KDn_Z.js";import{g as z}from"../modules/projects-CtQHdJ1D.js";import{a as b,d as q}from"../modules/courses-DLjLiu9n.js";import{I as N}from"../vendor/libs-YkehVsom.js";import"../index-DYDyJX_I.js";import"../core-CagO5n_Q.js";const S=r=>{try{return new URL(r),!0}catch{return!1}},E=f(async({request:r})=>{const t=new URL(r.url),s=t.searchParams.get("q");if(s){if(s==="")throw t.searchParams.delete("q"),c(t.toString());const n=s.trim().split(" ").filter(Boolean).join(" ");if(s!==n)throw n?t.searchParams.set("q",n):t.searchParams.delete("q"),c(t.toString())}if(!s)return{query:s,articles:[],courses:[],projects:[]};if(S(s)){const n=new URL(r.url),l=new URL(s);if(n.origin===l.origin)throw c(l.pathname)}const a=n=>{if(!s)return!1;const l=JSON.stringify(n),d=s.toLowerCase();return l.toLowerCase().includes(d)},i=(await k()).filter(a),o=(await q()).filter(a),u=(await z()).filter(a),h=i.length+u.length+o.length;return{query:s,articles:i,courses:o,projects:u,resultsCount:h}});function K(){const{query:r,articles:t,projects:s,courses:a,resultsCount:i}=p(),o=m.useCallback(()=>r?i===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",r]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",t.length,")"]}),e.jsx(g,{className:"px-0 !grid-cols-1",articles:t})]}),s.length>0&&e.jsx("section",{children:e.jsxs("h3",{children:["Projekty (",s.length,")"]})}),a.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",a.length,")"]}),e.jsx(b,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[t,a,s.length,r,i]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(x,{title:r?`(${i}) Rezultaty wyszukiwania dla ${r}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(j,{method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(w,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),e.jsxs(y,{type:"submit",children:[e.jsx(N,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:o()})]})}export{K as default,E as loader};
