import{r as d,j as e}from"../vendor/react-FM38ZwNs.js";import{F as m,r as l,c as j}from"../vendor/routing-B7o9zJcl.js";import{i as p,e as x,I as w,B as y,k as g}from"../shared-CQoGsBKt.js";import{A as k,c as f}from"../modules/articles-DBE4BAAy.js";import{g as z}from"../modules/projects-DJIkFGb0.js";import{a as S,d as b}from"../modules/courses-D2hLSWMC.js";import{I as N}from"../vendor/libs-Do7pQI2I.js";import"../index-DW1RlUPq.js";import"../core-I0i8YKtJ.js";async function F({request:t}){const r=new URL(t.url),s=r.searchParams.get("q");if(s){if(s==="")throw r.searchParams.delete("q"),l(r.toString());const o=s.trim().split(" ").filter(Boolean).join(" ");if(s!==o)throw o?r.searchParams.set("q",o):r.searchParams.delete("q"),l(r.toString())}if(!s)return{query:s,articles:[],courses:[],projects:[]};if(g(s)){const o=new URL(t.url),u=new URL(s);if(o.origin===u.origin)throw l(j(u).replace("#/",""))}const a=o=>s?JSON.stringify(o).toLowerCase().includes(s.toLowerCase()):!1,i=(await f()).filter(a),n=(await b()).filter(a),c=(await z()).filter(a),h=i.length+c.length+n.length;return{query:s,articles:i,courses:n,projects:c,resultsCount:h}}function v(){const{query:t,articles:r,projects:s,courses:a,resultsCount:i}=p(),n=d.useCallback(()=>t?i===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",t]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),r.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",r.length,")"]}),e.jsx(k,{className:"px-0 !grid-cols-1",articles:r})]}),s.length>0&&e.jsx("section",{children:e.jsxs("h3",{children:["Projekty (",s.length,")"]})}),a.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",a.length,")"]}),e.jsx(S,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[r,a,s.length,t,i]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(x,{title:t?`(${i}) Rezultaty wyszukiwania dla ${t}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(m,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(w,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:t??"",required:!0},t),e.jsxs(y,{type:"submit",children:[e.jsx(N,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:n()})]})}export{v as default,F as loader};
