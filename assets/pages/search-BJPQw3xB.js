import{r as j,j as e}from"../vendor/react-Cwpq9FU5.js";import{F as m,r as c,c as p}from"../vendor/routing-DkHuMqFH.js";import{i as x,e as w,I as y,B as f,j as g}from"../shared-DoW5i_UP.js";import{A as k,c as z}from"../modules/articles-CfZ7nrWy.js";import{g as b}from"../modules/projects-Bsa1UEc6.js";import{a as q,d as N}from"../modules/courses-CLkw_EXB.js";import{I as S}from"../vendor/libs-D-I6UJ0C.js";import"../index-BM0i57V7.js";import"../core-B1jAFknB.js";const L=r=>{try{return new URL(r),!0}catch{return!1}},K=g(async({request:r})=>{const t=new URL(r.url),s=t.searchParams.get("q");if(s){if(s==="")throw t.searchParams.delete("q"),c(t.toString());const n=s.trim().split(" ").filter(Boolean).join(" ");if(s!==n)throw n?t.searchParams.set("q",n):t.searchParams.delete("q"),c(t.toString())}if(!s)return{query:s,articles:[],courses:[],projects:[]};if(L(s)){const n=new URL(r.url),l=new URL(s);if(n.origin===l.origin)throw c(p(l).replace("#/",""))}const a=n=>{if(!s)return!1;const l=JSON.stringify(n),d=s.toLowerCase();return l.toLowerCase().includes(d)},i=(await z()).filter(a),o=(await N()).filter(a),u=(await b()).filter(a),h=i.length+u.length+o.length;return{query:s,articles:i,courses:o,projects:u,resultsCount:h}});function O(){const{query:r,articles:t,projects:s,courses:a,resultsCount:i}=x(),o=j.useCallback(()=>r?i===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",r]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",t.length,")"]}),e.jsx(k,{className:"px-0 !grid-cols-1",articles:t})]}),s.length>0&&e.jsx("section",{children:e.jsxs("h3",{children:["Projekty (",s.length,")"]})}),a.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",a.length,")"]}),e.jsx(q,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[t,a,s.length,r,i]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(w,{title:r?`(${i}) Rezultaty wyszukiwania dla ${r}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(m,{method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(y,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),e.jsxs(f,{type:"submit",children:[e.jsx(S,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:o()})]})}export{O as default,K as loader};
