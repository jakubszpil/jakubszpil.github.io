import{r as j,j as s}from"../react-f9Xa8TJW.js";import{F as m,r as l,c as p}from"../routing-sNbjLCFY.js";import{b as x}from"./article-details-p0HeURO5.js";import{A as w,d as y,S as g,I as f,B as k}from"../components-Dcwu63pF.js";import{b as z}from"./course-details-BQDw35oK.js";import{g as b}from"./home-BesZBrVb.js";import{u as S,j as h,i as N}from"../utils-DCYITngX.js";import{o as q}from"../runtime-DNEJC0bP.js";import"../app-BJ7CuR_0.js";async function v({request:t}){const r=new URL(t.url),e=r.searchParams.get("q");if(e){if(e==="")throw r.searchParams.delete("q"),l(r.toString());const o=e.trim().split(" ").filter(Boolean).join(" ");if(e!==o)throw o?r.searchParams.set("q",o):r.searchParams.delete("q"),l(r.toString())}if(!e)return h({query:e,articles:[],courses:[],projects:[],resultsCount:0});if(N(e)){const o=new URL(t.url),u=new URL(e);if(o.origin===u.origin)throw l(p(u).replace("#/",""))}const a=o=>e?JSON.stringify(o).toLowerCase().includes(e.toLowerCase()):!1,i=(await x()).filter(a),n=(await z()).filter(a),c=(await b()).filter(a),d=i.length+c.length+n.length;return h({query:e,articles:i,courses:n,projects:c,resultsCount:d})}function E(){const{query:t,articles:r,projects:e,courses:a,resultsCount:i}=S(),n=j.useCallback(()=>t?i===0?s.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",t]}):s.jsxs(s.Fragment,{children:[s.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),r.length>0&&s.jsxs("section",{children:[s.jsxs("h3",{children:["Artykuły (",r.length,")"]}),s.jsx(w,{className:"px-0 !grid-cols-1",articles:r})]}),e.length>0&&s.jsx("section",{children:s.jsxs("h3",{children:["Projekty (",e.length,")"]})}),a.length>0&&s.jsxs("section",{children:[s.jsxs("h3",{children:["Kursy (",a.length,")"]}),s.jsx(y,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[r,a,e.length,t,i]);return s.jsxs("section",{className:"prose max-w-full",children:[s.jsx(g,{title:t?`(${i}) Rezultaty wyszukiwania dla ${t}`:"Szukaj"}),s.jsxs("header",{className:"container pb-0",children:[s.jsx("h1",{className:"mb-0",children:"Szukaj"}),s.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),s.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),s.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),s.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),s.jsxs(m,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[s.jsx(f,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:t??"",required:!0},t),s.jsxs(k,{type:"submit",children:[s.jsx(q,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),s.jsx("div",{className:"container pt-0",children:n()})]})}export{E as default,v as loader};
