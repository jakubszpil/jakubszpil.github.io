import{r as m,j as s}from"../vendor/react-2cjcKZ2S.js";import{F as j,r as c}from"../vendor/routing-BMNaz3wH.js";import{f as p,b as x,I as w,B as y,h as f}from"../shared-CVlG6KkT.js";import{A as g,c as k}from"../modules/articles-CHvolIoK.js";import{g as z}from"../modules/projects-BmRNHs69.js";import{a as b,d as q}from"../modules/courses-BtuSiFGK.js";import{I as N}from"../vendor/libs-B37huEwq.js";import"../index-kNBX-fR9.js";import"../core-DgAH6NkQ.js";const L=r=>{try{return new URL(r),!0}catch{return!1}},W=f(async({request:r})=>{const t=new URL(r.url),e=t.searchParams.get("q");if(e){if(e==="")throw t.searchParams.delete("q"),c(t.toString());const n=e.trim().split(" ").filter(Boolean).join(" ");if(e!==n)throw n?t.searchParams.set("q",n):t.searchParams.delete("q"),c(t.toString())}if(!e)return{query:e,articles:[],courses:[],projects:[]};if(L(e)){const n=new URL(r.url),l=new URL(e);if(n.origin===l.origin)throw c(l.pathname)}const a=n=>{if(!e)return!1;const l=JSON.stringify(n),d=e.toLowerCase();return l.toLowerCase().includes(d)},i=(await k()).filter(a),o=(await q()).filter(a),u=(await z()).filter(a),h=i.length+u.length+o.length;return{query:e,articles:i,courses:o,projects:u,resultsCount:h}});function E(){const{query:r,articles:t,projects:e,courses:a,resultsCount:i}=p(),o=m.useCallback(()=>r?i===0?s.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",r]}):s.jsxs(s.Fragment,{children:[s.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),t.length>0&&s.jsxs("section",{children:[s.jsxs("h3",{children:["Artykuły (",t.length,")"]}),s.jsx(g,{className:"px-0 !grid-cols-1",articles:t})]}),e.length>0&&s.jsx("section",{children:s.jsxs("h3",{children:["Projekty (",e.length,")"]})}),a.length>0&&s.jsxs("section",{children:[s.jsxs("h3",{children:["Kursy (",a.length,")"]}),s.jsx(b,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[t,a,e.length,r,i]);return s.jsxs("section",{className:"prose max-w-full",children:[s.jsx(x,{title:r?`(${i}) Rezultaty wyszukiwania dla ${r}`:"Szukaj"}),s.jsxs("header",{className:"container pb-0",children:[s.jsx("h1",{className:"mb-0",children:"🔍 Wyszukaj"}),s.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),s.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),s.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),s.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),s.jsxs(j,{method:"get",className:"container py-0 bg-background flex gap-2",children:[s.jsx(w,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),s.jsxs(y,{type:"submit",children:[s.jsx(N,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),s.jsx("div",{className:"container pt-0",children:o()})]})}export{E as default,W as loader};
