import{r as h,j as e}from"../react-BDnC2YFb.js";import{F as p,r as l,b as j}from"../routing-CQmnW7h1.js";import{b as x}from"./article-details-CXXM2JvV.js";import{A as g}from"./article-list-BPIZBzAF.js";import{b as w}from"./course-details-DWW0_arH.js";import{C as y}from"./course-list-DZSsGghh.js";import{g as k}from"./home-ZLvmmQII.js";import{a as b,u as z,S as N,B as S,j as d}from"./about-B_gjLuzN.js";import{d as C}from"../runtime-BQ-rnmcR.js";const m=h.forwardRef(({className:r,type:t,...s},a)=>e.jsx("input",{type:t,className:b("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...s}));m.displayName="Input";const R=r=>{try{return new URL(r),!0}catch{return!1}};async function E({request:r}){const t=new URL(r.url),s=t.searchParams.get("q");if(s){if(s==="")throw t.searchParams.delete("q"),l(t.toString());const o=s.trim().split(" ").filter(Boolean).join(" ");if(s!==o)throw o?t.searchParams.set("q",o):t.searchParams.delete("q"),l(t.toString())}if(!s)return d({query:s,articles:[],courses:[],projects:[],resultsCount:0});if(R(s)){const o=new URL(r.url),u=new URL(s);if(o.origin===u.origin)throw l(j(u).replace("#/",""))}const a=o=>s?JSON.stringify(o).toLowerCase().includes(s.toLowerCase()):!1,i=(await x()).filter(a),n=(await w()).filter(a),c=(await k()).filter(a),f=i.length+c.length+n.length;return d({query:s,articles:i,courses:n,projects:c,resultsCount:f})}function K(){const{query:r,articles:t,projects:s,courses:a,resultsCount:i}=z(),n=h.useCallback(()=>r?i===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",r]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",i,")"]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",t.length,")"]}),e.jsx(g,{className:"px-0 !grid-cols-1",articles:t})]}),s.length>0&&e.jsx("section",{children:e.jsxs("h3",{children:["Projekty (",s.length,")"]})}),a.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",a.length,")"]}),e.jsx(y,{className:"px-0 !grid-cols-1",courses:a})]})]}):null,[t,a,s.length,r,i]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(N,{title:r?`(${i}) Rezultaty wyszukiwania dla ${r}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(p,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(m,{type:"text",name:"q",placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),e.jsxs(S,{type:"submit",children:[e.jsx(C,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:n()})]})}export{K as default,E as loader};
