import{j as e,f as c,h as d,e as h,c as m,r as f,F as p}from"./index-3upNhjDb.js";import{a as y,B as w}from"./button-DxnEUCft.js";import{S as j}from"./seo-BH4BvRlJ.js";import{f as x}from"./fetch-B5gQD-8S.js";import{A as g}from"./articles-h1BPCWNa.js";import{C as k}from"./courses-CzPa-Ovu.js";import{I as b}from"./IconSearch-FQ3DyaWM.js";import"./link-with-prefetch-uL8jXClB.js";import"./date-BfXueLdd.js";const u=({className:r,type:t,ref:s,...a})=>e.jsx("input",{type:t,className:y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...a});u.displayName="Input";const z=r=>{try{return new URL(r),!0}catch{return!1}},o="query";async function S(r){const t=await x("/content/search.json",{cache:"force-cache"}),s=n=>r?JSON.stringify(n).toLowerCase().includes(r.toLowerCase()):!1,a=await t.json();return Object.fromEntries(Object.entries(a).map(([n,i])=>[n,i.filter(s)]))}async function N(r){return Object.values(r).reduce((t,{length:s})=>t+s,0)}async function R(r){const t=new URL(r),s=t.searchParams.get(o);if(s){if(s==="")throw t.searchParams.delete(o),c(t.toString());const a=s.trim().split(" ").filter(Boolean).join(" ");if(s!==a)throw a?t.searchParams.set(o,a):t.searchParams.delete(o),c(t.toString())}if(s&&z(s)){const a=new URL(r),n=new URL(s);if(a.origin===n.origin)throw c(d(n).replace("#/",""))}return s}async function B({request:r}){const t=await R(r.url),s=await S(t),a=await N(s);return{...s,query:t,resultsCount:a}}function E(){const{query:r,articles:t,courses:s,resultsCount:a}=h(),{pathname:n}=m(),i=f.useCallback(()=>{if(!r)return null;if(a===0)return e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",r]});const l={pathname:n,label:"Powrót do wyników wyszukiwania"};return e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",a,")"]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",t.length,")"]}),e.jsx(g,{className:"px-0 !grid-cols-1",articles:t,locationState:l})]}),s.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",s.length,")"]}),e.jsx(k,{className:"px-0 !grid-cols-1",courses:s,locationState:l})]})]})},[t,s,r,a]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(j,{title:r?`(${a}) Rezultaty wyszukiwania dla ${r}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(p,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsx(u,{type:"text",name:o,placeholder:"Treść zapytania",defaultValue:r??"",required:!0},r),e.jsxs(w,{type:"submit",children:[e.jsx(b,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:i()})]})}export{E as default,B as loader};
