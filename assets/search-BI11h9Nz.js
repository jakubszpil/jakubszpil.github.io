import{G as i,H as u}from"./chunk-C37GKA54-BujQ4eEp.js";const l=s=>{try{return new URL(s),!0}catch{return!1}},n="query",o=new Map;function h(s,e){if(e&&o.has(e))return o.get(e);const t=a=>e?JSON.stringify(a).toLowerCase().includes(e.toLowerCase()):!1,r=Object.fromEntries(Object.entries(s).map(([a,c])=>[a,c.filter(t)]));return e&&o.set(e,r),r}function f(s){return Object.values(s).reduce((e,{length:t})=>e+t,0)}function m(s){const e=new URL(s),t=e.searchParams.get(n);if(t){if(t==="")throw e.searchParams.delete(n),i(e.toString());const r=t.trim().split(" ").filter(Boolean).join(" ");if(t!==r)throw r?e.searchParams.set(n,r):e.searchParams.delete(n),i(e.toString())}if(t&&l(t)){const r=new URL(s),a=new URL(t);if(r.origin===a.origin)throw i(u(a))}return t}async function w({request:s,serverLoader:e}){const t=await e(),r=m(s.url),a=h(t,r),c=f(a);return{results:a,initialResults:t,query:r,count:c}}w.hydrate=!0;export{w as c,n as q};
