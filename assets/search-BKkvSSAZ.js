import{k as e,y as t}from"./jsx-runtime-DMawWLDI.js";import{r as n}from"./src-DJwQwobt.js";const r=`q`;var i=new Map;function a(e,t){if(t&&i.has(t))return i.get(t);let n=e=>t?JSON.stringify(e).toLowerCase().includes(t.toLowerCase()):!1,r=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,t.filter(n)]));return t&&i.set(t,r),r}function o(e){return Object.values(e).reduce((e,{length:t})=>e+t,0)}function s(r){let i=new URL(r),a=i.searchParams.get(`q`);if(a===``)throw i.searchParams.delete(`q`),e(i.toString());if(a){if(n(a)){let n=new URL(r),i=new URL(a);if(n.origin===i.origin)throw e(t(i))}let o=a.trim().split(` `).filter(Boolean).join(` `);if(a!==o)throw o?i.searchParams.set(`q`,o):i.searchParams.delete(`q`),e(i.toString())}return a}async function c({request:e,serverLoader:t}){let n=await t(),r=s(e.url),i=a(n,r);return{results:i,initialResults:n,query:r,count:o(i)}}c.hydrate=!0;export{r as n,c as t};