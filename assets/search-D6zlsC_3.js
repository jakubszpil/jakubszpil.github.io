import{D as o,E as h}from"./chunk-D4RADZKF-RZTUKYdk.js";const f=s=>{try{return new URL(s),!0}catch{return!1}},c="query",i=new Map;function m(s,e){if(e&&i.has(e))return i.get(e);const t=n=>e?JSON.stringify(n).toLowerCase().includes(e.toLowerCase()):!1,r=Object.fromEntries(Object.entries(s).map(([n,a])=>[n,a.filter(t)]));return e&&i.set(e,r),r}function d(s){return Object.values(s).reduce((e,{length:t})=>e+t,0)}function g(s){const e=new URL(s),t=e.searchParams.get(c);if(t){if(t==="")throw e.searchParams.delete(c),o(e.toString());const r=t.trim().split(" ").filter(Boolean).join(" ");if(t!==r)throw r?e.searchParams.set(c,r):e.searchParams.delete(c),o(e.toString())}if(t&&f(t)){const r=new URL(s),n=new URL(t);if(r.origin===n.origin)throw o(h(n))}return t}async function w({request:s,serverLoader:e}){const t=e(),r=g(s.url);return{results:t.then(a=>{const u=m(a,r),l=d(u);return{...u,count:l}}),query:r}}w.hydrate=!0;export{w as c,c as q};
