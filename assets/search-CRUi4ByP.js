import{c as h,w as m,S as p}from"./seo-CKXxacMM.js";import{n as e,y as l,z as f,x as y,A as g,a as x,B as j}from"./chunk-K6AXKMTT-DnR1GwIg.js";import{A as k}from"./articles-CrQN1nAv.js";import{C as w}from"./courses-B3m7CP1N.js";import{c as b,B as z}from"./button-Dn-q0_DK.js";import{I as v}from"./IconSearch-B-he3ZKI.js";import"./date-BfXueLdd.js";/**
 * @license @tabler/icons-react v3.26.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N=h("outline","loader","IconLoader",[["path",{d:"M12 6l0 -3",key:"svg-0"}],["path",{d:"M16.25 7.75l2.15 -2.15",key:"svg-1"}],["path",{d:"M18 12l3 0",key:"svg-2"}],["path",{d:"M16.25 16.25l2.15 2.15",key:"svg-3"}],["path",{d:"M12 18l0 3",key:"svg-4"}],["path",{d:"M7.75 16.25l-2.15 2.15",key:"svg-5"}],["path",{d:"M6 12l-3 0",key:"svg-6"}],["path",{d:"M7.75 7.75l-2.15 -2.15",key:"svg-7"}]]);const c=({className:a,type:s,ref:t,...r})=>e.jsx("input",{type:s,className:b("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r});c.displayName="Input";const S=a=>{try{return new URL(a),!0}catch{return!1}},i="query";function R(a,s){const t=r=>s?JSON.stringify(r).toLowerCase().includes(s.toLowerCase()):!1;return Object.fromEntries(Object.entries(a).map(([r,n])=>[r,n.filter(t)]))}function L(a){return Object.values(a).reduce((s,{length:t})=>s+t,0)}function M(a){const s=new URL(a),t=s.searchParams.get(i);if(t){if(t==="")throw s.searchParams.delete(i),l(s.toString());const r=t.trim().split(" ").filter(Boolean).join(" ");if(t!==r)throw r?s.searchParams.set(i,r):s.searchParams.delete(i),l(s.toString())}if(t&&S(t)){const r=new URL(a),n=new URL(t);if(r.origin===n.origin)throw l(f(n).replace("#/",""))}return t}async function C({request:a,serverLoader:s}){const t=await s(),r=M(a.url),n=R(t,r),o=L(n);return{...n,resultsCount:o,query:r}}C.hydrate=!0;const E=m(function(){const{query:s,articles:t,courses:r,resultsCount:n}=y(),o=g(),u=o.state==="loading"&&!!o.location,d=x.useCallback(()=>s?n===0?e.jsxs("h2",{children:["Brak wyników wyszukiwania dla zapytania: ",s]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["Wyniki wyszukiwania (",n,")"]}),t.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Artykuły (",t.length,")"]}),e.jsx(k,{className:"px-0 !grid-cols-1",articles:t})]}),r.length>0&&e.jsxs("section",{children:[e.jsxs("h3",{children:["Kursy (",r.length,")"]}),e.jsx(w,{className:"px-0 !grid-cols-1",courses:r})]})]}):null,[t,r,s,n]);return e.jsxs("section",{className:"prose max-w-full",children:[e.jsx(p,{title:s?`(${n}) Rezultaty wyszukiwania dla ${s}`:"Szukaj"}),e.jsxs("header",{className:"container pb-0",children:[e.jsx("h1",{className:"mb-0",children:"Szukaj"}),e.jsx("p",{children:"Wskazówka: Obszary po których możesz szukać:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Artykuły: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Kursy: (tytuł, opis, słowa klucz, kategorie, zawartość)"}),e.jsx("li",{children:"Projekty: (tytuł, opis, słowa klucz, technologie, zawartość)"})]}),e.jsx("p",{children:"Możesz też wkleić skopiowany link aby spróbować przejść do wskazanej strony"})]}),e.jsxs(j,{preventScrollReset:!0,method:"get",className:"container py-0 bg-background flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[u&&e.jsx("div",{className:"flex absolute right-1 h-full items-center justify-center w-max",children:e.jsx(N,{className:"animate-spin"})}),e.jsx(c,{type:"text",name:i,placeholder:"Treść zapytania",defaultValue:s??"",required:!0},s)]}),e.jsxs(z,{type:"submit",children:[e.jsx(v,{className:"h-5 w-5 mr-1"}),"Szukaj"]})]}),e.jsx("div",{className:"container pt-0",children:d()})]})});export{C as clientLoader,E as default};
